<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>☆-..- 2005년의 어느 날 -..-☆</title>

<style>
@font-face {
  font-family: 'GalmuriCondensed';
  src: url('fonts/GalmuriCondensed.woff2') format('woff2');
}
* {
  font-family: 'GalmuriCondensed', monospace;
  box-sizing: border-box;
}

body {
  background:#b1b1b1;
  display:flex;
  justify-content:center;
  padding-top:40px;
  margin:0;
  font-size:14px;
}

.wrapper {
  background:#8cc6d1;
  width:850px;
  height:550px;
  padding:25px 15px 15px 25px;
  border-radius:10px;
}

.white-box {
  background:white;
  height:100%;
  display:flex;
  border-radius:8px;
  padding:15px;
}

.profile {
  width:28%;
  border-right:1px dashed #ccc;
  padding-right:15px;
  text-align:center;
}

.profile-img {
  width:100%;
  border:1px solid #ddd;
  margin-bottom:15px;
}

.main-content {
  width:72%;
  padding-left:20px;
  display:flex;
  flex-direction:column;
  overflow-y:auto;
}

h3 {
  margin:0 0 10px;
  color:#3b5998;
  border-bottom:1px dotted #ccc;
  padding-bottom:6px;
}

.tabs {
  margin-bottom:10px;
}

.tab {
  background:#eee;
  border:1px solid #aaa;
  padding:4px 10px;
  font-size:12px;
  cursor:pointer;
  margin-right:4px;
}

.tab.active {
  background:white;
  font-weight:bold;
}

.tab-content.hidden {
  display:none;
}

/* 방명록 */
#guestbook-list {
  flex-grow:1;
}

.guestbook-entry {
  background:#f6f6f6;
  padding:10px;
  margin-bottom:12px;
  border-radius:5px;
}

.ai-reply {
  color:#ff6600;
  margin-top:6px;
  border-top:1px dotted #ccc;
  padding-top:4px;
}

.input-area {
  margin-top:10px;
  border-top:2px solid #8cc6d1;
  padding-top:8px;
}

textarea {
  width:96%;
  height:40px;
}

button {
  float:right;
  margin-top:6px;
  cursor:pointer;
}

/* 사진첩 */
.gallery-grid {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}

.photo {
  border:1px solid #ccc;
  padding:4px;
}

.photo img {
  width:100%;
}

.caption {
  font-size:11px;
  margin:4px 0;
}

.like {
  font-size:11px;
  cursor:pointer;
  color:#ff6600;
}
</style>
</head>

<body>
<div class="wrapper">
<div class="white-box">

<div class="profile">
  <img id="profileImg" class="profile-img">
  <div id="profileText"></div>
</div>

<div class="main-content">
<h3 id="memberName"></h3>

<div class="tabs">
  <button class="tab active" onclick="showTab('guestbook')">방명록</button>
  <button class="tab" onclick="showTab('gallery')">사진첩</button>
</div>

<div id="guestbook" class="tab-content">
  <div id="guestbook-list"></div>
  <div class="input-area">
    <textarea id="user-msg" placeholder="일촌 신청하고 가세효..."></textarea>
    <button onclick="postMsg()">확인</button>
  </div>
</div>

<div id="gallery" class="tab-content hidden">
  <div class="gallery-grid" id="gallery-grid"></div>
</div>

</div>
</div>
</div>

<script>
/* ===== 멤버 ===== */
const members = [
{
  name:"주인장",
  img:"https://via.placeholder.com/300",
  bio:"난... ㄱㅏ끔... 눈물을 흘린ㄷㅏ...",
  photos:[
    {src:"https://via.placeholder.com/200", caption:"연습 끝"},
    {src:"https://via.placeholder.com/201", caption:"그냥"},
    {src:"https://via.placeholder.com/202", caption:"오늘"}
  ]
}
];

const moods = ["쿨","다정","삐짐"];
const silentChance = {쿨:0.1, 다정:0, 삐짐:0.4};

const replies = {
  normal:["흔적 고마워","보고 갔어","오늘 기분 좋음"],
  flirt:["이런 말 곤란함","갑자기 왜 이래"],
  rumor:["그런 소문 믿지 마"]
};

const currentMember = members[Math.floor(Math.random()*members.length)];
const currentMood = moods[Math.floor(Math.random()*moods.length)];

/* 프로필 */
profileImg.src = currentMember.img;
profileText.innerText = currentMember.bio;
memberName.innerText = `${currentMember.name} (${currentMood})`;

/* 탭 */
function showTab(t){
  document.querySelectorAll(".tab").forEach(b=>b.classList.remove("active"));
  document.querySelectorAll(".tab-content").forEach(c=>c.classList.add("hidden"));
  document.getElementById(t).classList.remove("hidden");
  event.target.classList.add("active");
}

/* 질문 분류 */
function pickReply(msg){
  if(msg.includes("사귀")||msg.includes("좋아")) return replies.flirt;
  if(msg.includes("소문")||msg.includes("사겨")) return replies.rumor;
  return replies.normal;
}

/* 방명록 */
function postMsg(){
  const msg=document.getElementById("user-msg").value.trim();
  if(!msg) return;
  const div=document.createElement("div");
  div.className="guestbook-entry";
  const id="r"+Date.now();
  div.innerHTML=`<b>익명:</b> ${msg}<div class="ai-reply" id="${id}"></div>`;
  document.getElementById("guestbook-list").prepend(div);
  user-msg.value="";

  setTimeout(()=>{
    if(Math.random()<silentChance[currentMood]){
      document.getElementById(id).remove();
      return;
    }
    const pool=pickReply(msg);
    document.getElementById(id).innerText=
      "ㄴ "+currentMember.name+": "+pool[Math.floor(Math.random()*pool.length)];
  },800);
}

/* 사진첩 */
const gallery=document.getElementById("gallery-grid");
currentMember.photos.forEach(p=>{
  const d=document.createElement("div");
  d.className="photo";
  let like=0;
  d.innerHTML=`
    <img src="${p.src}">
    <div class="caption">${p.caption}</div>
    <div class="like">♥ 공감 <span>0</span></div>
  `;
  d.querySelector(".like").onclick=()=>{
    like++;
    d.querySelector("span").innerText=like;
  };
  gallery.appendChild(d);
});
</script>
</body>
</html>
